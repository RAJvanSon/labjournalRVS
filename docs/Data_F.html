<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="RenÃ© van Son" />


<title>Data</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>

<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    My journal
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Tutorial_week1.html">Week 1: R Tutorial</a>
    </li>
    <li>
      <a href="week_2.html">Week 2: Introduction</a>
    </li>
    <li>
      <a href="Week_3.html">Week 3: Webscraping</a>
    </li>
    <li>
      <a href="week_4.html">Week 4: Elaboration on Introduction and Network Visualization</a>
    </li>
    <li>
      <a href="Data_prep.html">Data Prep</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Final Report
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Introduction_F.html">Introduction</a>
    </li>
    <li>
      <a href="Theory_F.html">Theory</a>
    </li>
    <li>
      <a href="Data_F.html">Data</a>
    </li>
    <li>
      <a href="Analysis_F.html">Analysis and Results</a>
    </li>
    <li>
      <a href="Conclusion_F.html">Conclusion</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JochemTolsma/labjournal">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data</h1>
<h4 class="author">RenÃ© van Son</h4>

</div>


<style>
body {
text-align: justify;
font-family: Times;
}
</style>
<div id="data" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Data</h1>
<div id="data-collection" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Data Collection</h2>
<p>The data used in this research was compiled by web scraping
information of all Sociology and Political Science scholars from all
universities in the Netherlands. In the first part of the data
collection process, all relevant information was compiled about the
authorâs position, university affiliation, names, idâs, departments,
etc. Next, all published works together with relevant work-related
information of these authors (work id, concepts, citations, abstracts,
topics, etc.), up until 2024, were scraped by using OpenAlex <span
class="citation">Priem et al. (2022)</span>. From this data I subsetted
a final dataset, consisting of all authors from the Sociology and
Political Science departments at the Radboud University and the
University of Amsterdam (n=282).</p>
<p>Furthermore, I compared the collaboration networks in two periods of
time. The first wave ranges from 2016 to 2019. The second wave ranges
from 2020 to 2023. Collaboration networks were made on the basis of
these waves. The networks are directed networks, which means that it is
assumed that the first author sends ties to all collaborators on a
specific work.</p>
</div>
<div id="dependent-variable" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Dependent
Variable</h2>
<p>The dependent variable in this research is the network of
collaborations between researchers, where the collaborations are the
ties and the researchers are the nodes <span class="citation">Van Duijn
et al. (1999)</span>. The subsequent analysis will be an attempt to
<em>describe</em> and <em>explain</em> the the changes in the network
and the âbehaviourâ of the people that make up the network. In more
formal terms, as used in the RSiena manual <span
class="citation">(Ripley &amp; Preciado, 2011)</span>, the dependent
variable(s) in social network analysis are the <em>creation</em> of a
tie or the <em>maintenance</em> (endowment) of a tie (technically, the
breaking of a tie is also an option, but will not be considered here).
In other words, the dependent variable is the network. However, the
network can also âfunctionâ as independent variable (so âexplainingâ
itself, for example in reciprocity, where the network effects have
influence on the network structure).</p>
</div>
<div id="independent-variables" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Independent
Variables</h2>
<div id="interdisciplinarity" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span>
Interdisciplinarity</h3>
<p>The main independent variable in this research is
interdisciplinarity. The OpenAlex data structure assigns to each work a
Topic entity. This entity is divided into âdomainsâ, âfieldsâ,
âsubfieldsâ and âtopicsâ, where âdomainâ is the broadest category and
âtopicsâ is the most fine grained category (see <strong>Figure
1</strong>). For the subsequent analysis, I used âfieldsâ as the main
analytic category, as this proved to be the right balance in terms of
subtleness and operationalizability. Both âsubfieldsâ and âtopicsâ were
also tested, but proved to be either too fine-grained or too broad.</p>
<p><img src="images/Schermafbeelding%202024-11-01%20om%2014.26.34.png"
width="433" /></p>
<p><strong>Figure 1:</strong> OpenAlex classification of the Topic
entity<br />
<em>Source</em>: <a href="https://docs.openalex.org/api-entities/topics"
class="uri">https://docs.openalex.org/api-entities/topics</a></p>
<p>To get a measure of interdisciplinarity at the author level, I use
the following formula, resulting in the Simpsonâs Diversity Index:</p>
<p><span class="math display">\[
SDI = 1 - \Big[\sum_{i=1}^n p_{i}^2\Big]
\]</span></p>
<p>Here, <span class="math inline">\(p\)</span> represents the
proportion of works by an author working in a certain field. Squaring
ensures giving more weight to the fields that are more common. So, in
essence, this formula means taking the sum of all the squared
proportions <span class="math inline">\(p^2\)</span> for all fields
<span class="math inline">\(i\)</span> and subtracting it from 1. The
Simpsonâs Diversity Index (SDI) can be used to measure the diversity of
the authorsâ research practices by highlighting how âconcentratedâ their
works are. A score closer to 1 will reflect an engagement in a more
diffused set of research fields, while a score close to 0 will reflect a
more homogeneous set of research fields.</p>
<p>Some notes of caution should be made when using this measure of
interdisciplinarity. First, the SDI <em>does not</em> measure the
distance between research fields: it only measures <em>whether or
not</em> a field is different from another one, but there is no
qualitative comparison of fields âamong each otherâ. To incorporate
this, one would need a measure that takes into account these distances
between fields (such as the Rao-Sterling index). However, this lies
outside the scope of this research.</p>
<p>Moreover, the SDI (as well as other measures for interdisciplinarity)
does not take into account the <em>actual</em> interdisciplinary
contribution an author has made to a work. For example, I could be a
philosopher who marginally contributes to a paragraph of a physics
paper. As soon as I am listed as an author of the paper, I will have
worked in the field of natural sciences (and, vice versa, the physicist
will have worked in the field of philosophy). However, this is partly
resolved by the squaring of <span class="math inline">\(p\)</span>
(which, of course, has implications by itself, but this seems the best
way to go here).</p>
</div>
<div id="author-position" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Author
position</h3>
<p>Author position revolves around the function an author has within the
university. In the raw dataset there were many descriptions for the
authorâs functions in 2024 (many of which were overlapping. See RScript
below for a full overview of the re-coding process). I reduced these
categories to six distinct ones: Researcher, PhD, Post-Doc, Assistant
Professor, Associate Professor and Professor.</p>
</div>
</div>
<div id="analytical-strategy" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Analytical
Strategy</h2>
<p>The analysis will be divided in three steps. First, I will provide
some descriptive statistics. These descriptives apply to the whole
sample, and are presented to provide a broad overview of the data.
Second, I will present some network descriptives, together with some
visualizations of the networks in the two waves. This is done in order
to capture some of the macro-level change in the network. Third, I will
use RSiena to provide an analysis for the network evolution. RSiena
works within the context of Stochastic Actor-Oriented Models, where
networks are assumed to evolve based on actor attributes and
preferences. Specifically, RSiena models allow researchers to attribute
macro-level network evolution to micro-level changes. As such, Siena
models are able to estimate parameters and distinguish selection (where
the dependent variable is the network) and influence (where the
dependent variable is behaviour) processes, which is beneficial when
trying to research social networks.</p>
</div>
<div id="descriptive-statistics" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Descriptive
Statistics</h2>
<p>Looking at the descriptive statistics below, we can see several
things. Firstly, the distribution of the SDI measure aligns with
expectations, showing a relatively high number of cases with an SDI of
around 0.5, while scores closer to 0 or 1 are more rare. In short, most
people are âaveragelyâ interdisciplinary. However, quite some authors
seem to have an SDI of 0, indicating that there is no variation at all
in the fields they work in. Section <strong>1.6.5.1</strong> illuminates
that these authors are all PhDs (with one exception, who is a post-doc),
suggesting that doctoral students indeed often tend to work âsolelyâ in
their own field.</p>
<p>Second, there are no anomalies in either distributions of discipline
or department (i.e.Â sociology/political science). 166 authors in the
sample were connected to the political science department of either the
RU or the UvA, and 116 authors were connected to the sociology
department of either the RU or the UvA. Some authors have a university
that is neither the RU nor the UvA listed under the âUniversiteit24â
variable, which means that they are affiliated to the RU or the UvA in
some way, but probably not as âmainâ university. When looking at the SDI
score grouped by University affiliation (Section
<strong>1.6.5.5</strong><u>)</u>, no notable differences catch the eye.
The UvA scholars have a slightly higher mean SDI of 0.45, with RU
scholars having a mean SDI of 0.40.</p>
<p>Third, when looking at the differences in SDI between authors with
different positions, it becomes clear (at least: at âfirst glanceâ) that
PhD students indeed have a lower mean-SDI than all other positions.
Interestingly, researchers without any teaching position at the
university seem to score relatively high at the SDI measure, indicating
that being more âlooselyâ bound to a university might foster
interdisciplinary possibilities. The âotherâ category represents unknown
or unclear positions, and should be ignored as such.</p>
</div>
<div id="data-preparation" class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> Data Preparation</h2>
<div id="start" class="section level3" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Start</h3>
<pre class="r"><code>#1. Load functions
#clean
rm(list = ls())

#check package function
fpackage.check &lt;- function(packages) {
    lapply(packages, FUN = function(x) {
        if (!require(x, character.only = TRUE)) {
            install.packages(x, dependencies = TRUE)
            library(x, character.only = TRUE)
        }
    })
}

#save function
fsave &lt;- function(x, file = NULL, location = &quot;./data/processed/&quot;) {
    ifelse(!dir.exists(&quot;data&quot;), dir.create(&quot;data&quot;), FALSE)
    ifelse(!dir.exists(&quot;data/processed&quot;), dir.create(&quot;data/processed&quot;), FALSE)
    if (is.null(file))
        file = deparse(substitute(x))
    datename &lt;- substr(gsub(&quot;[:-]&quot;, &quot;&quot;, Sys.time()), 1, 8)
    totalname &lt;- paste(location, datename, file, &quot;.rda&quot;, sep = &quot;&quot;)
    save(x, file = totalname)  #need to fix if file is reloaded as input name, not as x. 
}

#load function
fload &lt;- function(filename) {
    load(filename)
    get(ls()[ls() != &quot;filename&quot;])
}

#nice view function
fshowdf &lt;- function(x, ...) {
    knitr::kable(x, digits = 2, &quot;html&quot;, ...) %&gt;%
        kableExtra::kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) %&gt;%
        kableExtra::scroll_box(width = &quot;100%&quot;, height = &quot;300px&quot;)
}

#collaboration network function
fcolnet &lt;- function(data = scholars, university = &quot;RU&quot;, discipline = &quot;sociology&quot;, waves = list(c(2015,
    2018), c(2019, 2023)), type = c(&quot;first&quot;)) {

    # step 1
    demographics &lt;- do.call(rbind.data.frame, data$demographics)
    demographics &lt;- demographics %&gt;%
        mutate(Universiteit1.22 = replace(Universiteit1.22, is.na(Universiteit1.22), &quot;&quot;), Universiteit2.22 = replace(Universiteit2.22,
            is.na(Universiteit2.22), &quot;&quot;), Universiteit1.24 = replace(Universiteit1.24, is.na(Universiteit1.24),
            &quot;&quot;), Universiteit2.24 = replace(Universiteit2.24, is.na(Universiteit2.24), &quot;&quot;), discipline.22 = replace(discipline.22,
            is.na(discipline.22), &quot;&quot;), discipline.24 = replace(discipline.24, is.na(discipline.24), &quot;&quot;))

    sample &lt;- which((demographics$Universiteit1.22 %in% university | demographics$Universiteit2.22 %in%
        university | demographics$Universiteit1.24 %in% university | demographics$Universiteit2.24 %in%
        university) &amp; (demographics$discipline.22 %in% discipline | demographics$discipline.24 %in% discipline))

    demographics_soc &lt;- demographics[sample, ]
    scholars_sel &lt;- lapply(scholars, &quot;[&quot;, sample)

    # step 2
    ids &lt;- demographics_soc$au_id
    nwaves &lt;- length(waves)
    nets &lt;- array(0, dim = c(nwaves, length(ids), length(ids)), dimnames = list(wave = 1:nwaves, ids,
        ids))
    dimnames(nets)

    # step 3
    df_works &lt;- tibble(works_id = unlist(lapply(scholars_sel$work, function(l) l$id)), works_author = unlist(lapply(scholars_sel$work,
        function(l) l$author), recursive = FALSE), works_year = unlist(lapply(scholars_sel$work, function(l) l$publication_year),
        recursive = FALSE))

    df_works &lt;- df_works[!duplicated(df_works), ]

    # step 4
    if (type == &quot;first&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                ego &lt;- df_works_w$works_author[i][[1]]$au_id[1]
                alters &lt;- df_works_w$works_author[i][[1]]$au_id[-1]
                if (sum(ids %in% ego) &gt; 0 &amp; sum(ids %in% alters) &gt; 0) {
                  nets[j, which(ids %in% ego), which(ids %in% alters)] &lt;- 1
                }
            }
        }
    }

    if (type == &quot;last&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                ego &lt;- rev(df_works_w$works_author[i][[1]]$au_id)[1]
                alters &lt;- rev(df_works_w$works_author[i][[1]]$au_id)[-1]
                if (sum(ids %in% ego) &gt; 0 &amp; sum(ids %in% alters) &gt; 0) {
                  nets[j, which(ids %in% ego), which(ids %in% alters)] &lt;- 1
                }
            }
        }
    }

    if (type == &quot;all&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                egos &lt;- df_works_w$works_author[i][[1]]$au_id
                if (sum(ids %in% egos) &gt; 0) {
                  nets[j, which(ids %in% egos), which(ids %in% egos)] &lt;- 1
                }
            }
        }
    }
    output &lt;- list()
    output$data &lt;- scholars_sel
    output$nets &lt;- nets
    return(output)
}

#2. check packages
#check packages
packages = c(&quot;RSiena&quot;, &quot;tidyverse&quot;, &quot;stringdist&quot;, &quot;stringi&quot;, &quot;installr&quot;, &quot;foreign&quot;, &quot;jsonlite&quot;, &quot;openalexR&quot;, &quot;scholar&quot;, &quot;rvest&quot;, &quot;igraph&quot;, &quot;tidyr&quot;)
fpackage.check(packages)

#3. load data
scholars &lt;- fload(&quot;/Users/jannevanheesch/Documents/R. SN/scholars_20240924.rda&quot;)</code></pre>
</div>
<div id="subset" class="section level3" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> Subset</h3>
<pre class="r"><code>#1. Political science &amp; Sociolgy. Waves 2016-2019, 2020-2023.
df_RU &lt;- fcolnet(data = scholars, university = c(&quot;RU&quot;, &quot;UvA&quot;), discipline = c(&quot;sociology&quot;, &quot;political science&quot;), waves = list(c(2016,
    2019), c(2020, 2023)), type = c(&quot;first&quot;))

#2. Separate data
df &lt;- df_RU$data #separate scholars, works, demographics 
nets &lt;- df_RU$nets #networks

#df for demographics (author level)
df_ego &lt;- do.call(rbind.data.frame, df$demographics)

#df for authors
df_auth &lt;- do.call(rbind.data.frame, df$scholars_oa)</code></pre>
</div>
<div id="interdisciplinarity-1" class="section level3" number="1.6.3">
<h3><span class="header-section-number">1.6.3</span>
Interdisciplinarity</h3>
<pre class="r"><code>#3. Interdisciplinarity
#create function for all fields
f_topics_f &lt;- function(x) {
  topics &lt;- do.call(rbind.data.frame, x$topics) 
  topics &lt;- topics[topics$i &lt; 4 &amp; topics$name == &quot;field&quot;,] 
  SDI_f &lt;- 1 - sum((prop.table(table(topics$display_name)))^2) 
  return(SDI_f)
}

SDI_f &lt;- sapply(X = df$works, FUN = f_topics_f)
SDI_f

# attach to df_ego
df_ego &lt;- cbind(df_ego, SDI_f)</code></pre>
<pre class="r"><code>#4. Measures for interdisciplinarity I did not use (for Appendix?)
#subfields
f_topics_sf &lt;- function(x) {
  topics &lt;- do.call(rbind.data.frame, x$topics) #ik zet voor 1 auteur alle topics onder elkaar
  topics &lt;- topics[topics$i &lt; 4 &amp; topics$name == &quot;subfield&quot;,] 
  SDI_sf &lt;- 1 - sum((prop.table(table(topics$display_name)))^2)  
  return(SDI_sf)
}

SDI_sf &lt;- sapply(X = df$works, FUN = f_topics_sf) 
SDI_sf

#topics
f_topics_t &lt;- function(x) {
  topics &lt;- do.call(rbind.data.frame, x$topics)  
  topics &lt;- topics[topics$i &lt; 4 &amp; topics$name == &quot;topic&quot;,] 
  SDI_t &lt;- 1 - sum((prop.table(table(topics$display_name)))^2)  
  return(SDI_t)
}

SDI_t &lt;- sapply(X = df$works, FUN = f_topics_t) 
SDI_t

df_ego &lt;- cbind(df_ego, SDI_sf, SDI_t)</code></pre>
</div>
<div id="author-position-1" class="section level3" number="1.6.4">
<h3><span class="header-section-number">1.6.4</span> Author
position</h3>
<pre class="r"><code>#recode function variable
df_ego &lt;- df_ego %&gt;%
  mutate(function_2024 = case_when(
    Functie.24 %in% c(&quot;Universitair hoofddocent&quot;, &quot;Senior lecturer&quot;, &quot;Gepensioneerd UHD&quot;) ~ &quot;Associate Professor&quot;,
    Functie.24 %in% c(&quot;Onderzoeker&quot;, &quot;Associate researcher&quot;, &quot;Senior Researcher&quot;, &quot;Guest Researcher&quot;, &quot;Other researcher&quot;, &quot;Senior researcher&quot;, &quot;Hoofdonderzoeker&quot;, &quot;Medewerker&quot;, &quot;Junior onderzoeker&quot;, &quot;Gastonderzoeker&quot;, &quot;Fellow&quot;, &quot;Does project at UvA, has worked as professor, lecturer, and research fellow at different unis&quot;, &quot;Senior Research Fellow&quot;, &quot;Senior researcher part-time&quot;, &quot;Onderzoeksfellow&quot;, &quot;Research fellow&quot;) ~ &quot;Researcher&quot;,
    Functie.24 %in% c(&quot;Universitair docent&quot;, &quot;Lecturer&quot;, &quot;Docent?&quot;, &quot;Gepensioneerd docent sociologie&quot;, &quot;Lecturer and Researcher&quot;, &quot;Lecturer/researcher&quot;, &quot;Unversitair docent GPM&quot;, &quot;Docent&quot;, &quot;Docent (gepensioneerd)&quot;) ~ &quot;Assistant Professor&quot;,
    Functie.24 %in% c(&quot;PhD Student&quot;, &quot;External Phd&quot;, &quot;PhD Student anthropologie&quot;, &quot;PhD student&quot;, &quot;Doctoral student&quot;, &quot;part-time doctoral researcher&quot;, &quot;PhD studentt&quot;, &quot;Doctoral Researcher&quot;) ~ &quot;PhD&quot;,
    Functie.24 %in% c(&quot;Hoogleraar&quot;, &quot;Bijzonder hoogleraar&quot;, &quot;Hoogleraar/Afdelingsvoorzitter&quot;, &quot;Emeritus hoogleraar&quot;, &quot;Hoogleraar (visiting)&quot;) ~ &quot;Professor&quot;,
    Functie.24 %in% c(&quot;Postdoc&quot;, &quot;Phd &amp; postdoc&quot;) ~ &quot;Post-Doc&quot;,
    TRUE ~ &quot;Other&quot;  # For any other categories not explicitly mentioned
  ))</code></pre>
</div>
<div id="descriptives" class="section level3" number="1.6.5">
<h3><span class="header-section-number">1.6.5</span> Descriptives</h3>
<div id="distribution-of-sdi" class="section level4" number="1.6.5.1">
<h4><span class="header-section-number">1.6.5.1</span> Distribution of
SDI</h4>
<pre class="r"><code>#1. Simpson&#39;s Diversity Index
summary(SDI_f)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  0.0000  0.2421  0.4444  0.4311  0.6127  1.0000</code></pre>
<pre class="r"><code>ggplot(df_ego, aes(x = SDI_f)) + geom_histogram(binwidth = 0.05, fill = &quot;red&quot;, color = &quot;white&quot;) + labs(x = &quot;Simpson&#39;s Diversity Index&quot;,
    y = &quot;Frequency&quot;) + scale_x_continuous() + scale_y_continuous() + theme_minimal()</code></pre>
<p><img src="Data_F_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>#2. Show the cases for which SDI score was 0 or 1
df_zero_or_one &lt;- df_ego %&gt;%
    filter(SDI_f %in% c(0, 1))
print(df_zero_or_one)</code></pre>
<pre class="r"><code>ggplot(df_zero_or_one, aes(x = function_2024, fill = as.factor(SDI_f))) +
    geom_bar(position = &quot;dodge&quot;) +
    labs(title = &quot;SDI by Author Position&quot;,
         x = &quot;Author Position&quot;,
         y = &quot;Count&quot;,
         fill = &quot;SDI_f&quot;) +
    theme_minimal() +
    theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
<p><img src="Data_F_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="distribution-of-disciplines" class="section level4"
number="1.6.5.2">
<h4><span class="header-section-number">1.6.5.2</span> Distribution of
disciplines</h4>
<pre class="r"><code>#2. Distribution of scholars by university and by department

table(df_ego$discipline.24)</code></pre>
<pre><code>## 
## political science         sociology 
##               166               116</code></pre>
</div>
<div id="distribution-of-universities" class="section level4"
number="1.6.5.3">
<h4><span class="header-section-number">1.6.5.3</span> Distribution of
Universities</h4>
<pre class="r"><code>table(df_ego$Universiteit.24)</code></pre>
<pre><code>## 
##                           Bocconi University 
##                                            1 
##                                          EUR 
##                                            1 
##                               Leiden uni/UvA 
##                                            1 
##                                           RU 
##                                           86 
##                                       RU/RUG 
##                                            1 
##                                          RUG 
##                                            1 
##                               Uni Gothenburg 
##                                            1 
##                                           UU 
##                                            3 
##                                       UU/UvA 
##                                            1 
##                                          Uva 
##                                            1 
##                                          UvA 
##                                          157 
##                                         UvA? 
##                                            1 
## UvA/Frankfurt School of Finance &amp; Management 
##                                            1 
##                             UvA/Shandong uni 
##                                            1 
##                          UvA/Uni of Lausanne 
##                                            1 
##                   UvA/University of Lausanne 
##                                            1</code></pre>
<pre class="r"><code>table(df_ego$Universiteit.22)</code></pre>
<pre><code>## 
##                       Bocconi University/UvA 
##                                            1 
##                                       Leiden 
##                                            1 
##                               Leiden uni/UvA 
##                                            1 
##                                           RU 
##                                           89 
##                                       RU/RUG 
##                                            1 
##                                       RUG/RU 
##                                            1 
##                            Universiteit Gent 
##                                            1 
##                                           UU 
##                                            1 
##                                       UU/UvA 
##                                            1 
##                                          UvA 
##                                          142 
##                                      UvA/EUR 
##                                            1 
## UvA/Frankfurt School of Finance &amp; Management 
##                                            1 
##                             UvA/Shandong uni 
##                                            1 
##                           UvA/Uni Gothenburg 
##                                            2 
##                          UvA/Uni of Lausanne 
##                                            1 
##                   UvA/University of Lausanne 
##                                            1</code></pre>
</div>
<div id="distribution-of-author-position" class="section level4"
number="1.6.5.4">
<h4><span class="header-section-number">1.6.5.4</span> Distribution of
Author Position</h4>
<pre class="r"><code># Create a frequency table
frequency_table &lt;- df_ego %&gt;%
  count(function_2024) %&gt;%
  arrange(desc(n))

ggplot(frequency_table, aes(x = reorder(function_2024, n), y = n)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;steelblue&quot;) +
  labs(x = &quot;Position&quot;, y = &quot;Frequency&quot;, title = &quot;Frequency Distribution of Author Position(2024)&quot;) +
  coord_flip() +
  theme_minimal()</code></pre>
<p><img src="Data_F_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="mean-sdi-by-university" class="section level4"
number="1.6.5.5">
<h4><span class="header-section-number">1.6.5.5</span> Mean SDI by
University</h4>
<pre class="r"><code>#3. mean SDI by University

df_ego %&gt;%
    mutate(University = case_when(str_detect(Universiteit.24, &quot;RU&quot;) ~ &quot;RU&quot;, str_detect(Universiteit.24,
        &quot;UvA&quot;) ~ &quot;UvA&quot;, .default = &quot;No Official Affiliation&quot;)) %&gt;%
    group_by(University) %&gt;%
    summarise(mean_SDI = mean(SDI_f, na.rm = TRUE)) %&gt;%
    fshowdf()</code></pre>
<div
style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
University
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mean_SDI
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
No Official Affiliation
</td>
<td style="text-align:right;">
0.43
</td>
</tr>
<tr>
<td style="text-align:left;">
RU
</td>
<td style="text-align:right;">
0.40
</td>
</tr>
<tr>
<td style="text-align:left;">
UvA
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="mean-sdi-per-department" class="section level4"
number="1.6.5.6">
<h4><span class="header-section-number">1.6.5.6</span> Mean SDI per
Department</h4>
<pre class="r"><code>#4. mean SDI by department in 2024

df_ego %&gt;%
    mutate(Department = case_when(str_detect(discipline.24, &quot;sociology&quot;) ~ &quot;sociology&quot;, str_detect(discipline.24,
        &quot;political science&quot;) ~ &quot;political science&quot;, .default = &quot;no discipline&quot;)) %&gt;%
    group_by(Department) %&gt;%
    summarise(mean_SDI = mean(SDI_f, na.rm = TRUE)) %&gt;%
    fshowdf()</code></pre>
<div
style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Department
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mean_SDI
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
political science
</td>
<td style="text-align:right;">
0.40
</td>
</tr>
<tr>
<td style="text-align:left;">
sociology
</td>
<td style="text-align:right;">
0.47
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="mean-sdi-per-university-function" class="section level4"
number="1.6.5.7">
<h4><span class="header-section-number">1.6.5.7</span> Mean SDI per
University Function</h4>
<pre class="r"><code># Calculate mean SDI_f per function_2024
df_means &lt;- df_ego %&gt;%
    group_by(function_2024) %&gt;%
    summarise(mean_SDI = mean(SDI_f, na.rm = TRUE))

# Print the summary table if you want to see it
print(df_means)</code></pre>
<pre><code>## # A tibble: 7 Ã 2
##   function_2024       mean_SDI
##   &lt;chr&gt;                  &lt;dbl&gt;
## 1 Assistant Professor    0.448
## 2 Associate Professor    0.452
## 3 Other                  0.487
## 4 PhD                    0.375
## 5 Post-Doc               0.424
## 6 Professor              0.440
## 7 Researcher             0.470</code></pre>
<pre class="r"><code># Plot the results
ggplot(df_means, aes(x = reorder(function_2024, mean_SDI), y = mean_SDI)) +
    geom_bar(stat = &quot;identity&quot;, fill = &quot;steelblue&quot;) +
    labs(title = &quot;Mean SDI per University Function&quot;,
         x = &quot;University Function&quot;,
         y = &quot;Mean SDI&quot;) +
    coord_flip() +  
    theme_minimal()</code></pre>
<p><img src="Data_F_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
<div id="save-file" class="section level4" number="1.6.5.8">
<h4><span class="header-section-number">1.6.5.8</span> Save file</h4>
<pre class="r"><code>write_csv(df_ego, &quot;data_final.csv&quot;)
saveRDS(nets, &quot;nets.rds&quot;)</code></pre>
<pre><code></code></pre>
</div>
</div>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent"
entry-spacing="0" line-spacing="2">
<div id="ref-priem2022openalexfullyopenindexscholarly"
class="csl-entry">
Priem, J., Piwowar, H., &amp; Orr, R. (2022). <em>OpenAlex: A fully-open
index of scholarly works, authors, venues, institutions, and
concepts</em>. <a
href="https://arxiv.org/abs/2205.01833">https://arxiv.org/abs/2205.01833</a>
</div>
<div id="ref-Ripley2011ManualFR" class="csl-entry">
Ripley, R. M., &amp; Preciado, P. B. (2011). <em>Manual for RSiena</em>.
<a
href="https://api.semanticscholar.org/CorpusID:63236002">https://api.semanticscholar.org/CorpusID:63236002</a>
</div>
<div id="ref-van1999multilevel" class="csl-entry">
Van Duijn, M. A., Van Busschbach, J. T., &amp; Snijders, T. A. (1999).
Multilevel analysis of personal networks as dependent variables.
<em>Social Networks</em>, <em>21</em>(2), 187â210.
</div>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiRGF0YSIKYXV0aG9yOiAiUmVuw6kgdmFuIFNvbiIKb3V0cHV0OgogIGh0bWxfZG9jdW1lbnQ6CiAgICBjb2RlX2ZvbGRpbmc6IGhpZGUKYmlibGlvZ3JhcGh5OiByZWZlcmVuY2VzLmJpYgpjc2w6IGFwYS5jc2wKLS0tCgpgYGB7PWh0bWx9CjxzdHlsZT4KYm9keSB7CnRleHQtYWxpZ246IGp1c3RpZnk7CmZvbnQtZmFtaWx5OiBUaW1lczsKfQo8L3N0eWxlPgpgYGAKIyBEYXRhCgojIyBEYXRhIENvbGxlY3Rpb24KClRoZSBkYXRhIHVzZWQgaW4gdGhpcyByZXNlYXJjaCB3YXMgY29tcGlsZWQgYnkgd2ViIHNjcmFwaW5nIGluZm9ybWF0aW9uIG9mIGFsbCBTb2Npb2xvZ3kgYW5kIFBvbGl0aWNhbCBTY2llbmNlIHNjaG9sYXJzIGZyb20gYWxsIHVuaXZlcnNpdGllcyBpbiB0aGUgTmV0aGVybGFuZHMuIEluIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBkYXRhIGNvbGxlY3Rpb24gcHJvY2VzcywgYWxsIHJlbGV2YW50IGluZm9ybWF0aW9uIHdhcyBjb21waWxlZCBhYm91dCB0aGUgYXV0aG9yJ3MgcG9zaXRpb24sIHVuaXZlcnNpdHkgYWZmaWxpYXRpb24sIG5hbWVzLCBpZCdzLCBkZXBhcnRtZW50cywgZXRjLiBOZXh0LCBhbGwgcHVibGlzaGVkIHdvcmtzIHRvZ2V0aGVyIHdpdGggcmVsZXZhbnQgd29yay1yZWxhdGVkIGluZm9ybWF0aW9uIG9mIHRoZXNlIGF1dGhvcnMgKHdvcmsgaWQsIGNvbmNlcHRzLCBjaXRhdGlvbnMsIGFic3RyYWN0cywgdG9waWNzLCBldGMuKSwgdXAgdW50aWwgMjAyNCwgd2VyZSBzY3JhcGVkIGJ5IHVzaW5nIE9wZW5BbGV4IEBwcmllbTIwMjJvcGVuYWxleGZ1bGx5b3BlbmluZGV4c2Nob2xhcmx5LiBGcm9tIHRoaXMgZGF0YSBJIHN1YnNldHRlZCBhIGZpbmFsIGRhdGFzZXQsIGNvbnNpc3Rpbmcgb2YgYWxsIGF1dGhvcnMgZnJvbSB0aGUgU29jaW9sb2d5IGFuZCBQb2xpdGljYWwgU2NpZW5jZSBkZXBhcnRtZW50cyBhdCB0aGUgUmFkYm91ZCBVbml2ZXJzaXR5IGFuZCB0aGUgVW5pdmVyc2l0eSBvZiBBbXN0ZXJkYW0gKG49MjgyKS4KCkZ1cnRoZXJtb3JlLCBJIGNvbXBhcmVkIHRoZSBjb2xsYWJvcmF0aW9uIG5ldHdvcmtzIGluIHR3byBwZXJpb2RzIG9mIHRpbWUuIFRoZSBmaXJzdCB3YXZlIHJhbmdlcyBmcm9tIDIwMTYgdG8gMjAxOS4gVGhlIHNlY29uZCB3YXZlIHJhbmdlcyBmcm9tIDIwMjAgdG8gMjAyMy4gQ29sbGFib3JhdGlvbiBuZXR3b3JrcyB3ZXJlIG1hZGUgb24gdGhlIGJhc2lzIG9mIHRoZXNlIHdhdmVzLiBUaGUgbmV0d29ya3MgYXJlIGRpcmVjdGVkIG5ldHdvcmtzLCB3aGljaCBtZWFucyB0aGF0IGl0IGlzIGFzc3VtZWQgdGhhdCB0aGUgZmlyc3QgYXV0aG9yIHNlbmRzIHRpZXMgdG8gYWxsIGNvbGxhYm9yYXRvcnMgb24gYSBzcGVjaWZpYyB3b3JrLgoKIyMgRGVwZW5kZW50IFZhcmlhYmxlCgpUaGUgZGVwZW5kZW50IHZhcmlhYmxlIGluIHRoaXMgcmVzZWFyY2ggaXMgdGhlIG5ldHdvcmsgb2YgY29sbGFib3JhdGlvbnMgYmV0d2VlbiByZXNlYXJjaGVycywgd2hlcmUgdGhlIGNvbGxhYm9yYXRpb25zIGFyZSB0aGUgdGllcyBhbmQgdGhlIHJlc2VhcmNoZXJzIGFyZSB0aGUgbm9kZXMgQHZhbjE5OTltdWx0aWxldmVsLiBUaGUgc3Vic2VxdWVudCBhbmFseXNpcyB3aWxsIGJlIGFuIGF0dGVtcHQgdG8gKmRlc2NyaWJlKiBhbmQgKmV4cGxhaW4qIHRoZSB0aGUgY2hhbmdlcyBpbiB0aGUgbmV0d29yayBhbmQgdGhlICdiZWhhdmlvdXInIG9mIHRoZSBwZW9wbGUgdGhhdCBtYWtlIHVwIHRoZSBuZXR3b3JrLiBJbiBtb3JlIGZvcm1hbCB0ZXJtcywgYXMgdXNlZCBpbiB0aGUgUlNpZW5hIG1hbnVhbCBbQFJpcGxleTIwMTFNYW51YWxGUl0sIHRoZSBkZXBlbmRlbnQgdmFyaWFibGUocykgaW4gc29jaWFsIG5ldHdvcmsgYW5hbHlzaXMgYXJlIHRoZSAqY3JlYXRpb24qIG9mIGEgdGllIG9yIHRoZSAqbWFpbnRlbmFuY2UqIChlbmRvd21lbnQpIG9mIGEgdGllICh0ZWNobmljYWxseSwgdGhlIGJyZWFraW5nIG9mIGEgdGllIGlzIGFsc28gYW4gb3B0aW9uLCBidXQgd2lsbCBub3QgYmUgY29uc2lkZXJlZCBoZXJlKS4gSW4gb3RoZXIgd29yZHMsIHRoZSBkZXBlbmRlbnQgdmFyaWFibGUgaXMgdGhlIG5ldHdvcmsuIEhvd2V2ZXIsIHRoZSBuZXR3b3JrIGNhbiBhbHNvICdmdW5jdGlvbicgYXMgaW5kZXBlbmRlbnQgdmFyaWFibGUgKHNvICdleHBsYWluaW5nJyBpdHNlbGYsIGZvciBleGFtcGxlIGluIHJlY2lwcm9jaXR5LCB3aGVyZSB0aGUgbmV0d29yayBlZmZlY3RzIGhhdmUgaW5mbHVlbmNlIG9uIHRoZSBuZXR3b3JrIHN0cnVjdHVyZSkuCgojIyBJbmRlcGVuZGVudCBWYXJpYWJsZXMKCiMjIyBJbnRlcmRpc2NpcGxpbmFyaXR5CgpUaGUgbWFpbiBpbmRlcGVuZGVudCB2YXJpYWJsZSBpbiB0aGlzIHJlc2VhcmNoIGlzIGludGVyZGlzY2lwbGluYXJpdHkuIFRoZSBPcGVuQWxleCBkYXRhIHN0cnVjdHVyZSBhc3NpZ25zIHRvIGVhY2ggd29yayBhIFRvcGljIGVudGl0eS4gVGhpcyBlbnRpdHkgaXMgZGl2aWRlZCBpbnRvICdkb21haW5zJywgJ2ZpZWxkcycsICdzdWJmaWVsZHMnIGFuZCAndG9waWNzJywgd2hlcmUgJ2RvbWFpbicgaXMgdGhlIGJyb2FkZXN0IGNhdGVnb3J5IGFuZCAndG9waWNzJyBpcyB0aGUgbW9zdCBmaW5lIGdyYWluZWQgY2F0ZWdvcnkgKHNlZSAqKkZpZ3VyZSAxKiopLiBGb3IgdGhlIHN1YnNlcXVlbnQgYW5hbHlzaXMsIEkgdXNlZCAnZmllbGRzJyBhcyB0aGUgbWFpbiBhbmFseXRpYyBjYXRlZ29yeSwgYXMgdGhpcyBwcm92ZWQgdG8gYmUgdGhlIHJpZ2h0IGJhbGFuY2UgaW4gdGVybXMgb2Ygc3VidGxlbmVzcyBhbmQgb3BlcmF0aW9uYWxpemFiaWxpdHkuIEJvdGggJ3N1YmZpZWxkcycgYW5kICd0b3BpY3MnIHdlcmUgYWxzbyB0ZXN0ZWQsIGJ1dCBwcm92ZWQgdG8gYmUgZWl0aGVyIHRvbyBmaW5lLWdyYWluZWQgb3IgdG9vIGJyb2FkLgoKIVtdKGltYWdlcy9TY2hlcm1hZmJlZWxkaW5nJTIwMjAyNC0xMS0wMSUyMG9tJTIwMTQuMjYuMzQucG5nKXt3aWR0aD0iNDMzIn0KCioqRmlndXJlIDE6KiogT3BlbkFsZXggY2xhc3NpZmljYXRpb24gb2YgdGhlIFRvcGljIGVudGl0eVwKKlNvdXJjZSo6IDxodHRwczovL2RvY3Mub3BlbmFsZXgub3JnL2FwaS1lbnRpdGllcy90b3BpY3M+CgpUbyBnZXQgYSBtZWFzdXJlIG9mIGludGVyZGlzY2lwbGluYXJpdHkgYXQgdGhlIGF1dGhvciBsZXZlbCwgSSB1c2UgdGhlIGZvbGxvd2luZyBmb3JtdWxhLCByZXN1bHRpbmcgaW4gdGhlIFNpbXBzb24ncyBEaXZlcnNpdHkgSW5kZXg6CgokJApTREkgPSAxIC0gXEJpZ1tcc3VtX3tpPTF9Xm4gcF97aX1eMlxCaWddCiQkCgpIZXJlLCAkcCQgcmVwcmVzZW50cyB0aGUgcHJvcG9ydGlvbiBvZiB3b3JrcyBieSBhbiBhdXRob3Igd29ya2luZyBpbiBhIGNlcnRhaW4gZmllbGQuIFNxdWFyaW5nIGVuc3VyZXMgZ2l2aW5nIG1vcmUgd2VpZ2h0IHRvIHRoZSBmaWVsZHMgdGhhdCBhcmUgbW9yZSBjb21tb24uIFNvLCBpbiBlc3NlbmNlLCB0aGlzIGZvcm11bGEgbWVhbnMgdGFraW5nIHRoZSBzdW0gb2YgYWxsIHRoZSBzcXVhcmVkIHByb3BvcnRpb25zICRwXjIkIGZvciBhbGwgZmllbGRzICRpJCBhbmQgc3VidHJhY3RpbmcgaXQgZnJvbSAxLiBUaGUgU2ltcHNvbidzIERpdmVyc2l0eSBJbmRleCAoU0RJKSBjYW4gYmUgdXNlZCB0byBtZWFzdXJlIHRoZSBkaXZlcnNpdHkgb2YgdGhlIGF1dGhvcnMnIHJlc2VhcmNoIHByYWN0aWNlcyBieSBoaWdobGlnaHRpbmcgaG93ICdjb25jZW50cmF0ZWQnIHRoZWlyIHdvcmtzIGFyZS4gQSBzY29yZSBjbG9zZXIgdG8gMSB3aWxsIHJlZmxlY3QgYW4gZW5nYWdlbWVudCBpbiBhIG1vcmUgZGlmZnVzZWQgc2V0IG9mIHJlc2VhcmNoIGZpZWxkcywgd2hpbGUgYSBzY29yZSBjbG9zZSB0byAwIHdpbGwgcmVmbGVjdCBhIG1vcmUgaG9tb2dlbmVvdXMgc2V0IG9mIHJlc2VhcmNoIGZpZWxkcy4KClNvbWUgbm90ZXMgb2YgY2F1dGlvbiBzaG91bGQgYmUgbWFkZSB3aGVuIHVzaW5nIHRoaXMgbWVhc3VyZSBvZiBpbnRlcmRpc2NpcGxpbmFyaXR5LiBGaXJzdCwgdGhlIFNESSAqZG9lcyBub3QqIG1lYXN1cmUgdGhlIGRpc3RhbmNlIGJldHdlZW4gcmVzZWFyY2ggZmllbGRzOiBpdCBvbmx5IG1lYXN1cmVzICp3aGV0aGVyIG9yIG5vdCogYSBmaWVsZCBpcyBkaWZmZXJlbnQgZnJvbSBhbm90aGVyIG9uZSwgYnV0IHRoZXJlIGlzIG5vIHF1YWxpdGF0aXZlIGNvbXBhcmlzb24gb2YgZmllbGRzICdhbW9uZyBlYWNoIG90aGVyJy4gVG8gaW5jb3Jwb3JhdGUgdGhpcywgb25lIHdvdWxkIG5lZWQgYSBtZWFzdXJlIHRoYXQgdGFrZXMgaW50byBhY2NvdW50IHRoZXNlIGRpc3RhbmNlcyBiZXR3ZWVuIGZpZWxkcyAoc3VjaCBhcyB0aGUgUmFvLVN0ZXJsaW5nIGluZGV4KS4gSG93ZXZlciwgdGhpcyBsaWVzIG91dHNpZGUgdGhlIHNjb3BlIG9mIHRoaXMgcmVzZWFyY2guCgpNb3Jlb3ZlciwgdGhlIFNESSAoYXMgd2VsbCBhcyBvdGhlciBtZWFzdXJlcyBmb3IgaW50ZXJkaXNjaXBsaW5hcml0eSkgZG9lcyBub3QgdGFrZSBpbnRvIGFjY291bnQgdGhlICphY3R1YWwqIGludGVyZGlzY2lwbGluYXJ5IGNvbnRyaWJ1dGlvbiBhbiBhdXRob3IgaGFzIG1hZGUgdG8gYSB3b3JrLiBGb3IgZXhhbXBsZSwgSSBjb3VsZCBiZSBhIHBoaWxvc29waGVyIHdobyBtYXJnaW5hbGx5IGNvbnRyaWJ1dGVzIHRvIGEgcGFyYWdyYXBoIG9mIGEgcGh5c2ljcyBwYXBlci4gQXMgc29vbiBhcyBJIGFtIGxpc3RlZCBhcyBhbiBhdXRob3Igb2YgdGhlIHBhcGVyLCBJIHdpbGwgaGF2ZSB3b3JrZWQgaW4gdGhlIGZpZWxkIG9mIG5hdHVyYWwgc2NpZW5jZXMgKGFuZCwgdmljZSB2ZXJzYSwgdGhlIHBoeXNpY2lzdCB3aWxsIGhhdmUgd29ya2VkIGluIHRoZSBmaWVsZCBvZiBwaGlsb3NvcGh5KS4gSG93ZXZlciwgdGhpcyBpcyBwYXJ0bHkgcmVzb2x2ZWQgYnkgdGhlIHNxdWFyaW5nIG9mICRwJCAod2hpY2gsIG9mIGNvdXJzZSwgaGFzIGltcGxpY2F0aW9ucyBieSBpdHNlbGYsIGJ1dCB0aGlzIHNlZW1zIHRoZSBiZXN0IHdheSB0byBnbyBoZXJlKS4KCiMjIyBBdXRob3IgcG9zaXRpb24KCkF1dGhvciBwb3NpdGlvbiByZXZvbHZlcyBhcm91bmQgdGhlIGZ1bmN0aW9uIGFuIGF1dGhvciBoYXMgd2l0aGluIHRoZSB1bml2ZXJzaXR5LiBJbiB0aGUgcmF3IGRhdGFzZXQgdGhlcmUgd2VyZSBtYW55IGRlc2NyaXB0aW9ucyBmb3IgdGhlIGF1dGhvcidzIGZ1bmN0aW9ucyBpbiAyMDI0IChtYW55IG9mIHdoaWNoIHdlcmUgb3ZlcmxhcHBpbmcuIFNlZSBSU2NyaXB0IGJlbG93IGZvciBhIGZ1bGwgb3ZlcnZpZXcgb2YgdGhlIHJlLWNvZGluZyBwcm9jZXNzKS4gSSByZWR1Y2VkIHRoZXNlIGNhdGVnb3JpZXMgdG8gc2l4IGRpc3RpbmN0IG9uZXM6IFJlc2VhcmNoZXIsIFBoRCwgUG9zdC1Eb2MsIEFzc2lzdGFudCBQcm9mZXNzb3IsIEFzc29jaWF0ZSBQcm9mZXNzb3IgYW5kIFByb2Zlc3Nvci4KCiMjIEFuYWx5dGljYWwgU3RyYXRlZ3kKClRoZSBhbmFseXNpcyB3aWxsIGJlIGRpdmlkZWQgaW4gdGhyZWUgc3RlcHMuIEZpcnN0LCBJIHdpbGwgcHJvdmlkZSBzb21lIGRlc2NyaXB0aXZlIHN0YXRpc3RpY3MuIFRoZXNlIGRlc2NyaXB0aXZlcyBhcHBseSB0byB0aGUgd2hvbGUgc2FtcGxlLCBhbmQgYXJlIHByZXNlbnRlZCB0byBwcm92aWRlIGEgYnJvYWQgb3ZlcnZpZXcgb2YgdGhlIGRhdGEuIFNlY29uZCwgSSB3aWxsIHByZXNlbnQgc29tZSBuZXR3b3JrIGRlc2NyaXB0aXZlcywgdG9nZXRoZXIgd2l0aCBzb21lIHZpc3VhbGl6YXRpb25zIG9mIHRoZSBuZXR3b3JrcyBpbiB0aGUgdHdvIHdhdmVzLiBUaGlzIGlzIGRvbmUgaW4gb3JkZXIgdG8gY2FwdHVyZSBzb21lIG9mIHRoZSBtYWNyby1sZXZlbCBjaGFuZ2UgaW4gdGhlIG5ldHdvcmsuIFRoaXJkLCBJIHdpbGwgdXNlIFJTaWVuYSB0byBwcm92aWRlIGFuIGFuYWx5c2lzIGZvciB0aGUgbmV0d29yayBldm9sdXRpb24uIFJTaWVuYSB3b3JrcyB3aXRoaW4gdGhlIGNvbnRleHQgb2YgU3RvY2hhc3RpYyBBY3Rvci1PcmllbnRlZCBNb2RlbHMsIHdoZXJlIG5ldHdvcmtzIGFyZSBhc3N1bWVkIHRvIGV2b2x2ZSBiYXNlZCBvbiBhY3RvciBhdHRyaWJ1dGVzIGFuZCBwcmVmZXJlbmNlcy4gU3BlY2lmaWNhbGx5LCBSU2llbmEgbW9kZWxzIGFsbG93IHJlc2VhcmNoZXJzIHRvIGF0dHJpYnV0ZSBtYWNyby1sZXZlbCBuZXR3b3JrIGV2b2x1dGlvbiB0byBtaWNyby1sZXZlbCBjaGFuZ2VzLiBBcyBzdWNoLCBTaWVuYSBtb2RlbHMgYXJlIGFibGUgdG8gZXN0aW1hdGUgcGFyYW1ldGVycyBhbmQgZGlzdGluZ3Vpc2ggc2VsZWN0aW9uICh3aGVyZSB0aGUgZGVwZW5kZW50IHZhcmlhYmxlIGlzIHRoZSBuZXR3b3JrKSBhbmQgaW5mbHVlbmNlICh3aGVyZSB0aGUgZGVwZW5kZW50IHZhcmlhYmxlIGlzIGJlaGF2aW91cikgcHJvY2Vzc2VzLCB3aGljaCBpcyBiZW5lZmljaWFsIHdoZW4gdHJ5aW5nIHRvIHJlc2VhcmNoIHNvY2lhbCBuZXR3b3Jrcy4KCiMjIERlc2NyaXB0aXZlIFN0YXRpc3RpY3MKCkxvb2tpbmcgYXQgdGhlIGRlc2NyaXB0aXZlIHN0YXRpc3RpY3MgYmVsb3csIHdlIGNhbiBzZWUgc2V2ZXJhbCB0aGluZ3MuIEZpcnN0bHksIHRoZSBkaXN0cmlidXRpb24gb2YgdGhlIFNESSBtZWFzdXJlIGFsaWducyB3aXRoIGV4cGVjdGF0aW9ucywgc2hvd2luZyBhIHJlbGF0aXZlbHkgaGlnaCBudW1iZXIgb2YgY2FzZXMgd2l0aCBhbiBTREkgb2YgYXJvdW5kIDAuNSwgd2hpbGUgc2NvcmVzIGNsb3NlciB0byAwIG9yIDEgYXJlIG1vcmUgcmFyZS4gSW4gc2hvcnQsIG1vc3QgcGVvcGxlIGFyZSAiYXZlcmFnZWx5IiBpbnRlcmRpc2NpcGxpbmFyeS4gSG93ZXZlciwgcXVpdGUgc29tZSBhdXRob3JzIHNlZW0gdG8gaGF2ZSBhbiBTREkgb2YgMCwgaW5kaWNhdGluZyB0aGF0IHRoZXJlIGlzIG5vIHZhcmlhdGlvbiBhdCBhbGwgaW4gdGhlIGZpZWxkcyB0aGV5IHdvcmsgaW4uIFNlY3Rpb24gKioxLjYuNS4xKiogaWxsdW1pbmF0ZXMgdGhhdCB0aGVzZSBhdXRob3JzIGFyZSBhbGwgUGhEcyAod2l0aCBvbmUgZXhjZXB0aW9uLCB3aG8gaXMgYSBwb3N0LWRvYyksIHN1Z2dlc3RpbmcgdGhhdCBkb2N0b3JhbCBzdHVkZW50cyBpbmRlZWQgb2Z0ZW4gdGVuZCB0byB3b3JrICdzb2xlbHknIGluIHRoZWlyIG93biBmaWVsZC4KClNlY29uZCwgdGhlcmUgYXJlIG5vIGFub21hbGllcyBpbiBlaXRoZXIgZGlzdHJpYnV0aW9ucyBvZiBkaXNjaXBsaW5lIG9yIGRlcGFydG1lbnQgKGkuZS4gc29jaW9sb2d5L3BvbGl0aWNhbCBzY2llbmNlKS4gMTY2IGF1dGhvcnMgaW4gdGhlIHNhbXBsZSB3ZXJlIGNvbm5lY3RlZCB0byB0aGUgcG9saXRpY2FsIHNjaWVuY2UgZGVwYXJ0bWVudCBvZiBlaXRoZXIgdGhlIFJVIG9yIHRoZSBVdkEsIGFuZCAxMTYgYXV0aG9ycyB3ZXJlIGNvbm5lY3RlZCB0byB0aGUgc29jaW9sb2d5IGRlcGFydG1lbnQgb2YgZWl0aGVyIHRoZSBSVSBvciB0aGUgVXZBLiBTb21lIGF1dGhvcnMgaGF2ZSBhIHVuaXZlcnNpdHkgdGhhdCBpcyBuZWl0aGVyIHRoZSBSVSBub3IgdGhlIFV2QSBsaXN0ZWQgdW5kZXIgdGhlICdVbml2ZXJzaXRlaXQyNCcgdmFyaWFibGUsIHdoaWNoIG1lYW5zIHRoYXQgdGhleSBhcmUgYWZmaWxpYXRlZCB0byB0aGUgUlUgb3IgdGhlIFV2QSBpbiBzb21lIHdheSwgYnV0IHByb2JhYmx5IG5vdCBhcyAnbWFpbicgdW5pdmVyc2l0eS4gV2hlbiBsb29raW5nIGF0IHRoZSBTREkgc2NvcmUgZ3JvdXBlZCBieSBVbml2ZXJzaXR5IGFmZmlsaWF0aW9uIChTZWN0aW9uICoqMS42LjUuNSoqWyldey51bmRlcmxpbmV9LCBubyBub3RhYmxlIGRpZmZlcmVuY2VzIGNhdGNoIHRoZSBleWUuIFRoZSBVdkEgc2Nob2xhcnMgaGF2ZSBhIHNsaWdodGx5IGhpZ2hlciBtZWFuIFNESSBvZiAwLjQ1LCB3aXRoIFJVIHNjaG9sYXJzIGhhdmluZyBhIG1lYW4gU0RJIG9mIDAuNDAuCgpUaGlyZCwgd2hlbiBsb29raW5nIGF0IHRoZSBkaWZmZXJlbmNlcyBpbiBTREkgYmV0d2VlbiBhdXRob3JzIHdpdGggZGlmZmVyZW50IHBvc2l0aW9ucywgaXQgYmVjb21lcyBjbGVhciAoYXQgbGVhc3Q6IGF0ICdmaXJzdCBnbGFuY2UnKSB0aGF0IFBoRCBzdHVkZW50cyBpbmRlZWQgaGF2ZSBhIGxvd2VyIG1lYW4tU0RJIHRoYW4gYWxsIG90aGVyIHBvc2l0aW9ucy4gSW50ZXJlc3RpbmdseSwgcmVzZWFyY2hlcnMgd2l0aG91dCBhbnkgdGVhY2hpbmcgcG9zaXRpb24gYXQgdGhlIHVuaXZlcnNpdHkgc2VlbSB0byBzY29yZSByZWxhdGl2ZWx5IGhpZ2ggYXQgdGhlIFNESSBtZWFzdXJlLCBpbmRpY2F0aW5nIHRoYXQgYmVpbmcgbW9yZSAnbG9vc2VseScgYm91bmQgdG8gYSB1bml2ZXJzaXR5IG1pZ2h0IGZvc3RlciBpbnRlcmRpc2NpcGxpbmFyeSBwb3NzaWJpbGl0aWVzLiBUaGUgJ290aGVyJyBjYXRlZ29yeSByZXByZXNlbnRzIHVua25vd24gb3IgdW5jbGVhciBwb3NpdGlvbnMsIGFuZCBzaG91bGQgYmUgaWdub3JlZCBhcyBzdWNoLgoKIyMgRGF0YSBQcmVwYXJhdGlvbgoKIyMjIFN0YXJ0CgpgYGB7ciwgIGVjaG89VFJVRSwgcmVzdWx0cz0naGlkZScsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CiMxLiBMb2FkIGZ1bmN0aW9ucwojY2xlYW4Kcm0obGlzdCA9IGxzKCkpCgojY2hlY2sgcGFja2FnZSBmdW5jdGlvbgpmcGFja2FnZS5jaGVjayA8LSBmdW5jdGlvbihwYWNrYWdlcykgewogICAgbGFwcGx5KHBhY2thZ2VzLCBGVU4gPSBmdW5jdGlvbih4KSB7CiAgICAgICAgaWYgKCFyZXF1aXJlKHgsIGNoYXJhY3Rlci5vbmx5ID0gVFJVRSkpIHsKICAgICAgICAgICAgaW5zdGFsbC5wYWNrYWdlcyh4LCBkZXBlbmRlbmNpZXMgPSBUUlVFKQogICAgICAgICAgICBsaWJyYXJ5KHgsIGNoYXJhY3Rlci5vbmx5ID0gVFJVRSkKICAgICAgICB9CiAgICB9KQp9Cgojc2F2ZSBmdW5jdGlvbgpmc2F2ZSA8LSBmdW5jdGlvbih4LCBmaWxlID0gTlVMTCwgbG9jYXRpb24gPSAiLi9kYXRhL3Byb2Nlc3NlZC8iKSB7CiAgICBpZmVsc2UoIWRpci5leGlzdHMoImRhdGEiKSwgZGlyLmNyZWF0ZSgiZGF0YSIpLCBGQUxTRSkKICAgIGlmZWxzZSghZGlyLmV4aXN0cygiZGF0YS9wcm9jZXNzZWQiKSwgZGlyLmNyZWF0ZSgiZGF0YS9wcm9jZXNzZWQiKSwgRkFMU0UpCiAgICBpZiAoaXMubnVsbChmaWxlKSkKICAgICAgICBmaWxlID0gZGVwYXJzZShzdWJzdGl0dXRlKHgpKQogICAgZGF0ZW5hbWUgPC0gc3Vic3RyKGdzdWIoIls6LV0iLCAiIiwgU3lzLnRpbWUoKSksIDEsIDgpCiAgICB0b3RhbG5hbWUgPC0gcGFzdGUobG9jYXRpb24sIGRhdGVuYW1lLCBmaWxlLCAiLnJkYSIsIHNlcCA9ICIiKQogICAgc2F2ZSh4LCBmaWxlID0gdG90YWxuYW1lKSAgI25lZWQgdG8gZml4IGlmIGZpbGUgaXMgcmVsb2FkZWQgYXMgaW5wdXQgbmFtZSwgbm90IGFzIHguIAp9CgojbG9hZCBmdW5jdGlvbgpmbG9hZCA8LSBmdW5jdGlvbihmaWxlbmFtZSkgewogICAgbG9hZChmaWxlbmFtZSkKICAgIGdldChscygpW2xzKCkgIT0gImZpbGVuYW1lIl0pCn0KCiNuaWNlIHZpZXcgZnVuY3Rpb24KZnNob3dkZiA8LSBmdW5jdGlvbih4LCAuLi4pIHsKICAgIGtuaXRyOjprYWJsZSh4LCBkaWdpdHMgPSAyLCAiaHRtbCIsIC4uLikgJT4lCiAgICAgICAga2FibGVFeHRyYTo6a2FibGVfc3R5bGluZyhib290c3RyYXBfb3B0aW9ucyA9IGMoInN0cmlwZWQiLCAiaG92ZXIiKSkgJT4lCiAgICAgICAga2FibGVFeHRyYTo6c2Nyb2xsX2JveCh3aWR0aCA9ICIxMDAlIiwgaGVpZ2h0ID0gIjMwMHB4IikKfQoKI2NvbGxhYm9yYXRpb24gbmV0d29yayBmdW5jdGlvbgpmY29sbmV0IDwtIGZ1bmN0aW9uKGRhdGEgPSBzY2hvbGFycywgdW5pdmVyc2l0eSA9ICJSVSIsIGRpc2NpcGxpbmUgPSAic29jaW9sb2d5Iiwgd2F2ZXMgPSBsaXN0KGMoMjAxNSwKICAgIDIwMTgpLCBjKDIwMTksIDIwMjMpKSwgdHlwZSA9IGMoImZpcnN0IikpIHsKCiAgICAjIHN0ZXAgMQogICAgZGVtb2dyYXBoaWNzIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgZGF0YSRkZW1vZ3JhcGhpY3MpCiAgICBkZW1vZ3JhcGhpY3MgPC0gZGVtb2dyYXBoaWNzICU+JQogICAgICAgIG11dGF0ZShVbml2ZXJzaXRlaXQxLjIyID0gcmVwbGFjZShVbml2ZXJzaXRlaXQxLjIyLCBpcy5uYShVbml2ZXJzaXRlaXQxLjIyKSwgIiIpLCBVbml2ZXJzaXRlaXQyLjIyID0gcmVwbGFjZShVbml2ZXJzaXRlaXQyLjIyLAogICAgICAgICAgICBpcy5uYShVbml2ZXJzaXRlaXQyLjIyKSwgIiIpLCBVbml2ZXJzaXRlaXQxLjI0ID0gcmVwbGFjZShVbml2ZXJzaXRlaXQxLjI0LCBpcy5uYShVbml2ZXJzaXRlaXQxLjI0KSwKICAgICAgICAgICAgIiIpLCBVbml2ZXJzaXRlaXQyLjI0ID0gcmVwbGFjZShVbml2ZXJzaXRlaXQyLjI0LCBpcy5uYShVbml2ZXJzaXRlaXQyLjI0KSwgIiIpLCBkaXNjaXBsaW5lLjIyID0gcmVwbGFjZShkaXNjaXBsaW5lLjIyLAogICAgICAgICAgICBpcy5uYShkaXNjaXBsaW5lLjIyKSwgIiIpLCBkaXNjaXBsaW5lLjI0ID0gcmVwbGFjZShkaXNjaXBsaW5lLjI0LCBpcy5uYShkaXNjaXBsaW5lLjI0KSwgIiIpKQoKICAgIHNhbXBsZSA8LSB3aGljaCgoZGVtb2dyYXBoaWNzJFVuaXZlcnNpdGVpdDEuMjIgJWluJSB1bml2ZXJzaXR5IHwgZGVtb2dyYXBoaWNzJFVuaXZlcnNpdGVpdDIuMjIgJWluJQogICAgICAgIHVuaXZlcnNpdHkgfCBkZW1vZ3JhcGhpY3MkVW5pdmVyc2l0ZWl0MS4yNCAlaW4lIHVuaXZlcnNpdHkgfCBkZW1vZ3JhcGhpY3MkVW5pdmVyc2l0ZWl0Mi4yNCAlaW4lCiAgICAgICAgdW5pdmVyc2l0eSkgJiAoZGVtb2dyYXBoaWNzJGRpc2NpcGxpbmUuMjIgJWluJSBkaXNjaXBsaW5lIHwgZGVtb2dyYXBoaWNzJGRpc2NpcGxpbmUuMjQgJWluJSBkaXNjaXBsaW5lKSkKCiAgICBkZW1vZ3JhcGhpY3Nfc29jIDwtIGRlbW9ncmFwaGljc1tzYW1wbGUsIF0KICAgIHNjaG9sYXJzX3NlbCA8LSBsYXBwbHkoc2Nob2xhcnMsICJbIiwgc2FtcGxlKQoKICAgICMgc3RlcCAyCiAgICBpZHMgPC0gZGVtb2dyYXBoaWNzX3NvYyRhdV9pZAogICAgbndhdmVzIDwtIGxlbmd0aCh3YXZlcykKICAgIG5ldHMgPC0gYXJyYXkoMCwgZGltID0gYyhud2F2ZXMsIGxlbmd0aChpZHMpLCBsZW5ndGgoaWRzKSksIGRpbW5hbWVzID0gbGlzdCh3YXZlID0gMTpud2F2ZXMsIGlkcywKICAgICAgICBpZHMpKQogICAgZGltbmFtZXMobmV0cykKCiAgICAjIHN0ZXAgMwogICAgZGZfd29ya3MgPC0gdGliYmxlKHdvcmtzX2lkID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywgZnVuY3Rpb24obCkgbCRpZCkpLCB3b3Jrc19hdXRob3IgPSB1bmxpc3QobGFwcGx5KHNjaG9sYXJzX3NlbCR3b3JrLAogICAgICAgIGZ1bmN0aW9uKGwpIGwkYXV0aG9yKSwgcmVjdXJzaXZlID0gRkFMU0UpLCB3b3Jrc195ZWFyID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywgZnVuY3Rpb24obCkgbCRwdWJsaWNhdGlvbl95ZWFyKSwKICAgICAgICByZWN1cnNpdmUgPSBGQUxTRSkpCgogICAgZGZfd29ya3MgPC0gZGZfd29ya3NbIWR1cGxpY2F0ZWQoZGZfd29ya3MpLCBdCgogICAgIyBzdGVwIDQKICAgIGlmICh0eXBlID09ICJmaXJzdCIpIHsKICAgICAgICBmb3IgKGogaW4gMTpud2F2ZXMpIHsKICAgICAgICAgICAgZGZfd29ya3NfdyA8LSBkZl93b3Jrc1tkZl93b3JrcyR3b3Jrc195ZWFyID49IHdhdmVzW1tqXV1bMV0gJiBkZl93b3JrcyR3b3Jrc195ZWFyIDw9IHdhdmVzW1tqXV1bMl0sCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIGZvciAoaSBpbiAxOm5yb3coZGZfd29ya3NfdykpIHsKICAgICAgICAgICAgICAgIGVnbyA8LSBkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkWzFdCiAgICAgICAgICAgICAgICBhbHRlcnMgPC0gZGZfd29ya3NfdyR3b3Jrc19hdXRob3JbaV1bWzFdXSRhdV9pZFstMV0KICAgICAgICAgICAgICAgIGlmIChzdW0oaWRzICVpbiUgZWdvKSA+IDAgJiBzdW0oaWRzICVpbiUgYWx0ZXJzKSA+IDApIHsKICAgICAgICAgICAgICAgICAgbmV0c1tqLCB3aGljaChpZHMgJWluJSBlZ28pLCB3aGljaChpZHMgJWluJSBhbHRlcnMpXSA8LSAxCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgaWYgKHR5cGUgPT0gImxhc3QiKSB7CiAgICAgICAgZm9yIChqIGluIDE6bndhdmVzKSB7CiAgICAgICAgICAgIGRmX3dvcmtzX3cgPC0gZGZfd29ya3NbZGZfd29ya3Mkd29ya3NfeWVhciA+PSB3YXZlc1tbal1dWzFdICYgZGZfd29ya3Mkd29ya3NfeWVhciA8PSB3YXZlc1tbal1dWzJdLAogICAgICAgICAgICAgICAgXQogICAgICAgICAgICBmb3IgKGkgaW4gMTpucm93KGRmX3dvcmtzX3cpKSB7CiAgICAgICAgICAgICAgICBlZ28gPC0gcmV2KGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWQpWzFdCiAgICAgICAgICAgICAgICBhbHRlcnMgPC0gcmV2KGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWQpWy0xXQogICAgICAgICAgICAgICAgaWYgKHN1bShpZHMgJWluJSBlZ28pID4gMCAmIHN1bShpZHMgJWluJSBhbHRlcnMpID4gMCkgewogICAgICAgICAgICAgICAgICBuZXRzW2osIHdoaWNoKGlkcyAlaW4lIGVnbyksIHdoaWNoKGlkcyAlaW4lIGFsdGVycyldIDwtIDEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBpZiAodHlwZSA9PSAiYWxsIikgewogICAgICAgIGZvciAoaiBpbiAxOm53YXZlcykgewogICAgICAgICAgICBkZl93b3Jrc193IDwtIGRmX3dvcmtzW2RmX3dvcmtzJHdvcmtzX3llYXIgPj0gd2F2ZXNbW2pdXVsxXSAmIGRmX3dvcmtzJHdvcmtzX3llYXIgPD0gd2F2ZXNbW2pdXVsyXSwKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgZm9yIChpIGluIDE6bnJvdyhkZl93b3Jrc193KSkgewogICAgICAgICAgICAgICAgZWdvcyA8LSBkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkCiAgICAgICAgICAgICAgICBpZiAoc3VtKGlkcyAlaW4lIGVnb3MpID4gMCkgewogICAgICAgICAgICAgICAgICBuZXRzW2osIHdoaWNoKGlkcyAlaW4lIGVnb3MpLCB3aGljaChpZHMgJWluJSBlZ29zKV0gPC0gMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgb3V0cHV0IDwtIGxpc3QoKQogICAgb3V0cHV0JGRhdGEgPC0gc2Nob2xhcnNfc2VsCiAgICBvdXRwdXQkbmV0cyA8LSBuZXRzCiAgICByZXR1cm4ob3V0cHV0KQp9CgojMi4gY2hlY2sgcGFja2FnZXMKI2NoZWNrIHBhY2thZ2VzCnBhY2thZ2VzID0gYygiUlNpZW5hIiwgInRpZHl2ZXJzZSIsICJzdHJpbmdkaXN0IiwgInN0cmluZ2kiLCAiaW5zdGFsbHIiLCAiZm9yZWlnbiIsICJqc29ubGl0ZSIsICJvcGVuYWxleFIiLCAic2Nob2xhciIsICJydmVzdCIsICJpZ3JhcGgiLCAidGlkeXIiKQpmcGFja2FnZS5jaGVjayhwYWNrYWdlcykKCiMzLiBsb2FkIGRhdGEKc2Nob2xhcnMgPC0gZmxvYWQoIi9Vc2Vycy9qYW5uZXZhbmhlZXNjaC9Eb2N1bWVudHMvUi4gU04vc2Nob2xhcnNfMjAyNDA5MjQucmRhIikKCgpgYGAKCiMjIyBTdWJzZXQKCmBgYHtyfQojMS4gUG9saXRpY2FsIHNjaWVuY2UgJiBTb2Npb2xneS4gV2F2ZXMgMjAxNi0yMDE5LCAyMDIwLTIwMjMuCmRmX1JVIDwtIGZjb2xuZXQoZGF0YSA9IHNjaG9sYXJzLCB1bml2ZXJzaXR5ID0gYygiUlUiLCAiVXZBIiksIGRpc2NpcGxpbmUgPSBjKCJzb2Npb2xvZ3kiLCAicG9saXRpY2FsIHNjaWVuY2UiKSwgd2F2ZXMgPSBsaXN0KGMoMjAxNiwKICAgIDIwMTkpLCBjKDIwMjAsIDIwMjMpKSwgdHlwZSA9IGMoImZpcnN0IikpCgojMi4gU2VwYXJhdGUgZGF0YQpkZiA8LSBkZl9SVSRkYXRhICNzZXBhcmF0ZSBzY2hvbGFycywgd29ya3MsIGRlbW9ncmFwaGljcyAKbmV0cyA8LSBkZl9SVSRuZXRzICNuZXR3b3JrcwoKI2RmIGZvciBkZW1vZ3JhcGhpY3MgKGF1dGhvciBsZXZlbCkKZGZfZWdvIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgZGYkZGVtb2dyYXBoaWNzKQoKI2RmIGZvciBhdXRob3JzCmRmX2F1dGggPC0gZG8uY2FsbChyYmluZC5kYXRhLmZyYW1lLCBkZiRzY2hvbGFyc19vYSkKYGBgCgojIyMgSW50ZXJkaXNjaXBsaW5hcml0eQoKYGBge3IsIGVjaG89VFJVRSwgcmVzdWx0cz0naGlkZScsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CiMzLiBJbnRlcmRpc2NpcGxpbmFyaXR5CiNjcmVhdGUgZnVuY3Rpb24gZm9yIGFsbCBmaWVsZHMKZl90b3BpY3NfZiA8LSBmdW5jdGlvbih4KSB7CiAgdG9waWNzIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgeCR0b3BpY3MpIAogIHRvcGljcyA8LSB0b3BpY3NbdG9waWNzJGkgPCA0ICYgdG9waWNzJG5hbWUgPT0gImZpZWxkIixdIAogIFNESV9mIDwtIDEgLSBzdW0oKHByb3AudGFibGUodGFibGUodG9waWNzJGRpc3BsYXlfbmFtZSkpKV4yKSAKICByZXR1cm4oU0RJX2YpCn0KClNESV9mIDwtIHNhcHBseShYID0gZGYkd29ya3MsIEZVTiA9IGZfdG9waWNzX2YpClNESV9mCgojIGF0dGFjaCB0byBkZl9lZ28KZGZfZWdvIDwtIGNiaW5kKGRmX2VnbywgU0RJX2YpCmBgYAoKYGBge3IsIGVjaG89VFJVRSwgcmVzdWx0cz0naGlkZScsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CiM0LiBNZWFzdXJlcyBmb3IgaW50ZXJkaXNjaXBsaW5hcml0eSBJIGRpZCBub3QgdXNlIChmb3IgQXBwZW5kaXg/KQojc3ViZmllbGRzCmZfdG9waWNzX3NmIDwtIGZ1bmN0aW9uKHgpIHsKICB0b3BpY3MgPC0gZG8uY2FsbChyYmluZC5kYXRhLmZyYW1lLCB4JHRvcGljcykgI2lrIHpldCB2b29yIDEgYXV0ZXVyIGFsbGUgdG9waWNzIG9uZGVyIGVsa2FhcgogIHRvcGljcyA8LSB0b3BpY3NbdG9waWNzJGkgPCA0ICYgdG9waWNzJG5hbWUgPT0gInN1YmZpZWxkIixdIAogIFNESV9zZiA8LSAxIC0gc3VtKChwcm9wLnRhYmxlKHRhYmxlKHRvcGljcyRkaXNwbGF5X25hbWUpKSleMikgIAogIHJldHVybihTRElfc2YpCn0KClNESV9zZiA8LSBzYXBwbHkoWCA9IGRmJHdvcmtzLCBGVU4gPSBmX3RvcGljc19zZikgClNESV9zZgoKI3RvcGljcwpmX3RvcGljc190IDwtIGZ1bmN0aW9uKHgpIHsKICB0b3BpY3MgPC0gZG8uY2FsbChyYmluZC5kYXRhLmZyYW1lLCB4JHRvcGljcykgIAogIHRvcGljcyA8LSB0b3BpY3NbdG9waWNzJGkgPCA0ICYgdG9waWNzJG5hbWUgPT0gInRvcGljIixdIAogIFNESV90IDwtIDEgLSBzdW0oKHByb3AudGFibGUodGFibGUodG9waWNzJGRpc3BsYXlfbmFtZSkpKV4yKSAgCiAgcmV0dXJuKFNESV90KQp9CgpTRElfdCA8LSBzYXBwbHkoWCA9IGRmJHdvcmtzLCBGVU4gPSBmX3RvcGljc190KSAKU0RJX3QKCmRmX2VnbyA8LSBjYmluZChkZl9lZ28sIFNESV9zZiwgU0RJX3QpCmBgYAoKIyMjIEF1dGhvciBwb3NpdGlvbgoKYGBge3J9CiNyZWNvZGUgZnVuY3Rpb24gdmFyaWFibGUKZGZfZWdvIDwtIGRmX2VnbyAlPiUKICBtdXRhdGUoZnVuY3Rpb25fMjAyNCA9IGNhc2Vfd2hlbigKICAgIEZ1bmN0aWUuMjQgJWluJSBjKCJVbml2ZXJzaXRhaXIgaG9vZmRkb2NlbnQiLCAiU2VuaW9yIGxlY3R1cmVyIiwgIkdlcGVuc2lvbmVlcmQgVUhEIikgfiAiQXNzb2NpYXRlIFByb2Zlc3NvciIsCiAgICBGdW5jdGllLjI0ICVpbiUgYygiT25kZXJ6b2VrZXIiLCAiQXNzb2NpYXRlIHJlc2VhcmNoZXIiLCAiU2VuaW9yIFJlc2VhcmNoZXIiLCAiR3Vlc3QgUmVzZWFyY2hlciIsICJPdGhlciByZXNlYXJjaGVyIiwgIlNlbmlvciByZXNlYXJjaGVyIiwgIkhvb2Zkb25kZXJ6b2VrZXIiLCAiTWVkZXdlcmtlciIsICJKdW5pb3Igb25kZXJ6b2VrZXIiLCAiR2FzdG9uZGVyem9la2VyIiwgIkZlbGxvdyIsICJEb2VzIHByb2plY3QgYXQgVXZBLCBoYXMgd29ya2VkIGFzIHByb2Zlc3NvciwgbGVjdHVyZXIsIGFuZCByZXNlYXJjaCBmZWxsb3cgYXQgZGlmZmVyZW50IHVuaXMiLCAiU2VuaW9yIFJlc2VhcmNoIEZlbGxvdyIsICJTZW5pb3IgcmVzZWFyY2hlciBwYXJ0LXRpbWUiLCAiT25kZXJ6b2Vrc2ZlbGxvdyIsICJSZXNlYXJjaCBmZWxsb3ciKSB+ICJSZXNlYXJjaGVyIiwKICAgIEZ1bmN0aWUuMjQgJWluJSBjKCJVbml2ZXJzaXRhaXIgZG9jZW50IiwgIkxlY3R1cmVyIiwgIkRvY2VudD8iLCAiR2VwZW5zaW9uZWVyZCBkb2NlbnQgc29jaW9sb2dpZSIsICJMZWN0dXJlciBhbmQgUmVzZWFyY2hlciIsICJMZWN0dXJlci9yZXNlYXJjaGVyIiwgIlVudmVyc2l0YWlyIGRvY2VudCBHUE0iLCAiRG9jZW50IiwgIkRvY2VudCAoZ2VwZW5zaW9uZWVyZCkiKSB+ICJBc3Npc3RhbnQgUHJvZmVzc29yIiwKICAgIEZ1bmN0aWUuMjQgJWluJSBjKCJQaEQgU3R1ZGVudCIsICJFeHRlcm5hbCBQaGQiLCAiUGhEIFN0dWRlbnQgYW50aHJvcG9sb2dpZSIsICJQaEQgc3R1ZGVudCIsICJEb2N0b3JhbCBzdHVkZW50IiwgInBhcnQtdGltZSBkb2N0b3JhbCByZXNlYXJjaGVyIiwgIlBoRCBzdHVkZW50dCIsICJEb2N0b3JhbCBSZXNlYXJjaGVyIikgfiAiUGhEIiwKICAgIEZ1bmN0aWUuMjQgJWluJSBjKCJIb29nbGVyYWFyIiwgIkJpanpvbmRlciBob29nbGVyYWFyIiwgIkhvb2dsZXJhYXIvQWZkZWxpbmdzdm9vcnppdHRlciIsICJFbWVyaXR1cyBob29nbGVyYWFyIiwgIkhvb2dsZXJhYXIgKHZpc2l0aW5nKSIpIH4gIlByb2Zlc3NvciIsCiAgICBGdW5jdGllLjI0ICVpbiUgYygiUG9zdGRvYyIsICJQaGQgJiBwb3N0ZG9jIikgfiAiUG9zdC1Eb2MiLAogICAgVFJVRSB+ICJPdGhlciIgICMgRm9yIGFueSBvdGhlciBjYXRlZ29yaWVzIG5vdCBleHBsaWNpdGx5IG1lbnRpb25lZAogICkpCgpgYGAKCiMjIyBEZXNjcmlwdGl2ZXMKCiMjIyMgRGlzdHJpYnV0aW9uIG9mIFNESQoKYGBge3J9CiMxLiBTaW1wc29uJ3MgRGl2ZXJzaXR5IEluZGV4CnN1bW1hcnkoU0RJX2YpCgpnZ3Bsb3QoZGZfZWdvLCBhZXMoeCA9IFNESV9mKSkgKyBnZW9tX2hpc3RvZ3JhbShiaW53aWR0aCA9IDAuMDUsIGZpbGwgPSAicmVkIiwgY29sb3IgPSAid2hpdGUiKSArIGxhYnMoeCA9ICJTaW1wc29uJ3MgRGl2ZXJzaXR5IEluZGV4IiwKICAgIHkgPSAiRnJlcXVlbmN5IikgKyBzY2FsZV94X2NvbnRpbnVvdXMoKSArIHNjYWxlX3lfY29udGludW91cygpICsgdGhlbWVfbWluaW1hbCgpCgpgYGAKCmBgYHtyLCBlY2hvPVRSVUUsIHJlc3VsdHM9J2hpZGUnLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQojMi4gU2hvdyB0aGUgY2FzZXMgZm9yIHdoaWNoIFNESSBzY29yZSB3YXMgMCBvciAxCmRmX3plcm9fb3Jfb25lIDwtIGRmX2VnbyAlPiUKICAgIGZpbHRlcihTRElfZiAlaW4lIGMoMCwgMSkpCnByaW50KGRmX3plcm9fb3Jfb25lKQoKYGBgCgpgYGB7Un0KZ2dwbG90KGRmX3plcm9fb3Jfb25lLCBhZXMoeCA9IGZ1bmN0aW9uXzIwMjQsIGZpbGwgPSBhcy5mYWN0b3IoU0RJX2YpKSkgKwogICAgZ2VvbV9iYXIocG9zaXRpb24gPSAiZG9kZ2UiKSArCiAgICBsYWJzKHRpdGxlID0gIlNESSBieSBBdXRob3IgUG9zaXRpb24iLAogICAgICAgICB4ID0gIkF1dGhvciBQb3NpdGlvbiIsCiAgICAgICAgIHkgPSAiQ291bnQiLAogICAgICAgICBmaWxsID0gIlNESV9mIikgKwogICAgdGhlbWVfbWluaW1hbCgpICsKICAgIHRoZW1lKGF4aXMudGV4dC54ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gNDUsIGhqdXN0ID0gMSkpCmBgYAoKIyMjIyBEaXN0cmlidXRpb24gb2YgZGlzY2lwbGluZXMKCmBgYHtyfQojMi4gRGlzdHJpYnV0aW9uIG9mIHNjaG9sYXJzIGJ5IHVuaXZlcnNpdHkgYW5kIGJ5IGRlcGFydG1lbnQKCnRhYmxlKGRmX2VnbyRkaXNjaXBsaW5lLjI0KQoKYGBgCgojIyMjIERpc3RyaWJ1dGlvbiBvZiBVbml2ZXJzaXRpZXMKCmBgYHtyfQp0YWJsZShkZl9lZ28kVW5pdmVyc2l0ZWl0LjI0KQp0YWJsZShkZl9lZ28kVW5pdmVyc2l0ZWl0LjIyKQoKCmBgYAoKIyMjIyBEaXN0cmlidXRpb24gb2YgQXV0aG9yIFBvc2l0aW9uCgpgYGB7cn0KIyBDcmVhdGUgYSBmcmVxdWVuY3kgdGFibGUKZnJlcXVlbmN5X3RhYmxlIDwtIGRmX2VnbyAlPiUKICBjb3VudChmdW5jdGlvbl8yMDI0KSAlPiUKICBhcnJhbmdlKGRlc2MobikpCgpnZ3Bsb3QoZnJlcXVlbmN5X3RhYmxlLCBhZXMoeCA9IHJlb3JkZXIoZnVuY3Rpb25fMjAyNCwgbiksIHkgPSBuKSkgKwogIGdlb21fYmFyKHN0YXQgPSAiaWRlbnRpdHkiLCBmaWxsID0gInN0ZWVsYmx1ZSIpICsKICBsYWJzKHggPSAiUG9zaXRpb24iLCB5ID0gIkZyZXF1ZW5jeSIsIHRpdGxlID0gIkZyZXF1ZW5jeSBEaXN0cmlidXRpb24gb2YgQXV0aG9yIFBvc2l0aW9uKDIwMjQpIikgKwogIGNvb3JkX2ZsaXAoKSArCiAgdGhlbWVfbWluaW1hbCgpCgpgYGAKCiMjIyMgTWVhbiBTREkgYnkgVW5pdmVyc2l0eQoKYGBge3J9CiMzLiBtZWFuIFNESSBieSBVbml2ZXJzaXR5CgpkZl9lZ28gJT4lCiAgICBtdXRhdGUoVW5pdmVyc2l0eSA9IGNhc2Vfd2hlbihzdHJfZGV0ZWN0KFVuaXZlcnNpdGVpdC4yNCwgIlJVIikgfiAiUlUiLCBzdHJfZGV0ZWN0KFVuaXZlcnNpdGVpdC4yNCwKICAgICAgICAiVXZBIikgfiAiVXZBIiwgLmRlZmF1bHQgPSAiTm8gT2ZmaWNpYWwgQWZmaWxpYXRpb24iKSkgJT4lCiAgICBncm91cF9ieShVbml2ZXJzaXR5KSAlPiUKICAgIHN1bW1hcmlzZShtZWFuX1NESSA9IG1lYW4oU0RJX2YsIG5hLnJtID0gVFJVRSkpICU+JQogICAgZnNob3dkZigpCgoKYGBgCgojIyMjIE1lYW4gU0RJIHBlciBEZXBhcnRtZW50CgpgYGB7cn0KIzQuIG1lYW4gU0RJIGJ5IGRlcGFydG1lbnQgaW4gMjAyNAoKZGZfZWdvICU+JQogICAgbXV0YXRlKERlcGFydG1lbnQgPSBjYXNlX3doZW4oc3RyX2RldGVjdChkaXNjaXBsaW5lLjI0LCAic29jaW9sb2d5IikgfiAic29jaW9sb2d5Iiwgc3RyX2RldGVjdChkaXNjaXBsaW5lLjI0LAogICAgICAgICJwb2xpdGljYWwgc2NpZW5jZSIpIH4gInBvbGl0aWNhbCBzY2llbmNlIiwgLmRlZmF1bHQgPSAibm8gZGlzY2lwbGluZSIpKSAlPiUKICAgIGdyb3VwX2J5KERlcGFydG1lbnQpICU+JQogICAgc3VtbWFyaXNlKG1lYW5fU0RJID0gbWVhbihTRElfZiwgbmEucm0gPSBUUlVFKSkgJT4lCiAgICBmc2hvd2RmKCkKYGBgCgojIyMjIE1lYW4gU0RJIHBlciBVbml2ZXJzaXR5IEZ1bmN0aW9uCgpgYGB7cn0KIyBDYWxjdWxhdGUgbWVhbiBTRElfZiBwZXIgZnVuY3Rpb25fMjAyNApkZl9tZWFucyA8LSBkZl9lZ28gJT4lCiAgICBncm91cF9ieShmdW5jdGlvbl8yMDI0KSAlPiUKICAgIHN1bW1hcmlzZShtZWFuX1NESSA9IG1lYW4oU0RJX2YsIG5hLnJtID0gVFJVRSkpCgojIFByaW50IHRoZSBzdW1tYXJ5IHRhYmxlIGlmIHlvdSB3YW50IHRvIHNlZSBpdApwcmludChkZl9tZWFucykKCiMgUGxvdCB0aGUgcmVzdWx0cwpnZ3Bsb3QoZGZfbWVhbnMsIGFlcyh4ID0gcmVvcmRlcihmdW5jdGlvbl8yMDI0LCBtZWFuX1NESSksIHkgPSBtZWFuX1NESSkpICsKICAgIGdlb21fYmFyKHN0YXQgPSAiaWRlbnRpdHkiLCBmaWxsID0gInN0ZWVsYmx1ZSIpICsKICAgIGxhYnModGl0bGUgPSAiTWVhbiBTREkgcGVyIFVuaXZlcnNpdHkgRnVuY3Rpb24iLAogICAgICAgICB4ID0gIlVuaXZlcnNpdHkgRnVuY3Rpb24iLAogICAgICAgICB5ID0gIk1lYW4gU0RJIikgKwogICAgY29vcmRfZmxpcCgpICsgIAogICAgdGhlbWVfbWluaW1hbCgpCmBgYAoKIyMjIyBTYXZlIGZpbGUKCmBgYHtyLCByZXN1bHRzPSdoaWRlJ30Kd3JpdGVfY3N2KGRmX2VnbywgImRhdGFfZmluYWwuY3N2IikKc2F2ZVJEUyhuZXRzLCAibmV0cy5yZHMiKQpgYGAKCmBgYCAgICAgICAgIApgYGAKCiMgUmVmZXJlbmNlcwo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Data_F.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
